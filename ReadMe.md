# Фермерский рынок

## Задание
Реализовать учет продаж продуктов.

### Сущности
- **Продукт**: 
  - ID, Название, Категория (овощи/фрукты), Цена за кг
- **Покупатель**: 
  - ФИО, Телефон, Скидочная карта
- **Продажа**: 
  - Связь продукта и покупателя, Дата, Вес, Стоимость

### Дополнительно
- Расчет среднего веса закупки по каждому наименованию товара за последний месяц.

---

## LAB1
1. Использовать в качестве шаблона код из ветки `feature/spring-boot-test`:  
   [https://bitbucket.org/zil-courses/hl-module1/src/main/](https://bitbucket.org/zil-courses/hl-module1/src/main/)
2. Переделать проект в IntelliJ IDEA под свою бизнес-постановку 
   (в качестве реализации компонентов репозиториев использовать статические поля-коллекции Java).
3. Закоммитить в свой git и показать преподавателю.

---

## LAB2
1. Развернуть PostgreSQL (в Docker Compose или локально):  
   [Руководство по развертыванию PostgreSQL в Docker](https://proghunter.ru/articles/running-postgresql-and-pgadmin-in-docker).
2. Переделать компоненты-репозитории на работу с таблицами БД.
3. Наполнить БД данными для тестирования.
4. Закоммитить изменения в git и показать преподавателю.

---

## LAB3
1. Написать Dockerfile для контейнеризации приложения.
2. Написать генератор `create/insert` для `initdb`:  
   [Пример генератора на Python](https://habr.com/ru/articles/578744/).  
   Запускать генератор перед запуском DB.
3. Развернуть приложение и DB на одной из виртуальных машин в Docker Compose.
4. Продемонстрировать развернутый стенд преподавателю.

---

## LAB3.5
1. Развернуть docker compose на одной VM
2. Выполнить curl одного из эндпойнтов с другой VM и продемонстрировать готовность к нагрузочному тестированию

---

## LAB4
1. Развернуть K6 на соседней виртуальной машине:  
   [Официальный сайт K6](https://k6.io/).
2. Подготовить простейший нагрузочный тест (например, получение данных одной из таблиц).
3. Построить график зависимости времени отклика от нагрузки.


---

## LAB4.5
Создать скрипт на Python, который автоматически заполнит ваш REST-сервис тестовыми данными перед запуском нагрузочных тестов с использованием k6. 
Характеристики скрипта:
1. Поддерживает аргументы командной строки:
--count — количество создаваемых объектов (по умолчанию 500).
--endpoint — API-эндпоинт (например, users или tasks, с обнулением текущих данных в приложении и генерацие данных для зависимых таблиц).
2. Скрипт использует библиотеку requests для отправки HTTP-запросов и библиотеку Faker для генерации реалистичных данных
Убрать initdb-логику (по данным, миграции схемы остаются в приложении) из приложения и развертывания, для удобства можно добавить в приложение эндпойнты /clear (удаление всех данных в таблице)

